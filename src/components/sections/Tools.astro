---
import { Image } from 'astro:assets';

//Icones qui ne sont pas sur devicon
import davinci from '../../assets/icons/icon_davinciresolve.png';

const tools = [
    { 
        name: "JavaScript", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg", 
        image: null,
        category: "Langage",
        experienceLevel: 2
    },
    { 
        name: "React", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg", 
        image: null,
        category: "Framework",
        experienceLevel: 1
    },
    { 
        name: "Node.js", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg", 
        image: null,
        category: "Framework",
        experienceLevel: 2
    },
    { 
        name: "Python", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg", 
        image: null,
        category: "Langage",
        experienceLevel: 3
    },
    { 
        name: "Astro", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/astro/astro-original.svg", 
        image: null,
        category: "Framework",
        experienceLevel: 2
    },
    { 
        name: "Visual Studio Code", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vscode/vscode-original.svg", 
        image: null,
        category: "Logiciel",
        experienceLevel: 4
    },
    { 
        name: "Git", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg", 
        image: null,
        category: "Logiciel",
        experienceLevel: 4
    },
    { 
        name: "Docker", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg", 
        image: null,
        category: "Logiciel",
        experienceLevel: 2
    },
    { 
        name: "TypeScript", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg", 
        image: null,
        category: "Langage",
        experienceLevel: 2
    },
    { 
        name: "C#", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/csharp/csharp-original.svg", 
        image: null,
        category: "Langage",
        experienceLevel: 4
    },
    { 
        name: ".NET", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/dotnetcore/dotnetcore-original.svg", 
        image: null,
        category: "Framework",
        experienceLevel: 4
    },
    { 
        name: "Java", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg", 
        image: null,
        category: "Langage",
        experienceLevel: 3
    },
    { 
        name: "SQL", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg", 
        image: null,
        category: "Langage",
        experienceLevel: 4
    },
    { 
        name: "Angular", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/angularjs/angularjs-original.svg", 
        image: null,
        category: "Framework",
        experienceLevel: 2
    },
    { 
        name: "HTML", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg", 
        image: null,
        category: "Langage",
        experienceLevel: 3
    },
    { 
        name: "CSS", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg", 
        image: null,
        category: "Langage",
        experienceLevel: 2
    },
    { 
        name: "PHP", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/php/php-original.svg", 
        image: null,
        category: "Langage",
        experienceLevel: 2
    },
    { 
        name: "Symfony", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/symfony/symfony-original.svg", 
        image: null,
        category: "Framework",
        experienceLevel: 3
    },
    { 
        name: "Django", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/django/django-plain.svg", 
        image: null,
        category: "Framework",
        experienceLevel: 2
    },
    { 
        name: "Unity", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/unity/unity-original.svg", 
        image: null,
        category: "Logiciel",
        experienceLevel: 4
    },
    { 
        name: "Visual Studio", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/visualstudio/visualstudio-plain.svg", 
        image: null,
        category: "Logiciel",
        experienceLevel: 4
    },
    { 
        name: "Eclipse", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/eclipse/eclipse-original.svg", 
        image: null,
        category: "Logiciel",
        experienceLevel: 1
    },
    { 
        name: "Godot", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/godot/godot-original.svg", 
        image: null,
        category: "Logiciel",
        experienceLevel: 1
    },
    { 
        name: "Spring", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/spring/spring-original.svg", 
        image: null,
        category: "Framework",
        experienceLevel: 1
    },
    { 
        name: "Quasar", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/quasar/quasar-original.svg", 
        image: null,
        category: "Framework",
        experienceLevel: 1
    },
    { 
        name: "SonarQube", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/sonarqube/sonarqube-original.svg", 
        image: null,
        category: "Logiciel",
        experienceLevel: 1
    },
    { 
        name: "Blender", 
        iconUrl: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/blender/blender-original.svg", 
        image: null,
        category: "Logiciel",
        experienceLevel: 2
    },
    { 
        name: "DaVinci Resolve", 
        iconUrl: null, 
        image : davinci,
        category: "Logiciel",
        experienceLevel: 2
    }
];
---
<section id="tools" class="bg-gray-100 py-20">
    <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold text-center mb-12">Mes Outils</h2>
        
        <div class="flex justify-center mb-8 space-x-4">
            <select id="category-filter" class="px-4 py-2 border rounded">
                <option value="">Toutes Catégories</option>
                <option value="Langage">Langages</option>
                <option value="Framework">Frameworks</option>
                <option value="Logiciel">Logiciels</option>
            </select>
            
            <select id="experience-filter" class="px-4 py-2 border rounded">
                <option value="0">Tous Niveaux</option>
                <option value="1">Bases</option>
                <option value="2">Bonnes notions</option>
                <option value="3">Autonome</option>
                <option value="4">Confirmé</option>
            </select>
        </div>

        <div id="tools-grid" class="grid md:grid-cols-5 gap-6 max-w-4xl mx-auto">
            {tools
            .sort((a, b) => b.experienceLevel - a.experienceLevel)
            .map((tool) => (
                <div 
                class="tool-card bg-white p-6 rounded-lg shadow-md text-center"
                data-category={tool.category}
                data-experience={tool.experienceLevel}
                >
                    {tool.iconUrl ? (
                        <Image src={tool.iconUrl} alt={tool.name} width={64} height={64} class="w-16 h-16 mx-auto mb-4" />
                    ) : tool.image ? (
                        <Image src={tool.image} alt={tool.name} width={64} height={64} class="w-16 h-16 mx-auto mb-4" />
                    ) : (
                        <div class="w-16 h-16 mx-auto mb-4 bg-gray-200 flex items-center justify-center rounded">
                            <span class="text-gray-500">N/A</span>
                        </div>
                    )}
                    <h3 class="text-xl font-semibold">{tool.name}</h3>
                    <div class="flex justify-center mt-2">
                        {[...Array(4)].map((_, index) => (
                        <span class={`text-2xl ${index < tool.experienceLevel ? 'text-yellow-500' : 'text-gray-300'}`}>
                            ★
                        </span>
                        ))}
                    </div>
                    <p class="text-sm text-gray-500 mt-2">{tool.category}</p>
                </div>
            ))}
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const categoryFilter = document.getElementById('category-filter');
        const experienceFilter = document.getElementById('experience-filter');
        const toolCards = document.querySelectorAll('.tool-card');

        function filterTools() {
            const selectedCategory = categoryFilter ? (categoryFilter as HTMLSelectElement).value : '';
            const selectedExperience = parseInt((experienceFilter as HTMLSelectElement).value);

            toolCards.forEach(card => {
                const cardCategory = card.getAttribute('data-category');
                const cardExperience = parseInt(card.getAttribute('data-experience') || '0');

                const categoryMatch = !selectedCategory || cardCategory === selectedCategory;
                const experienceMatch = !selectedExperience || cardExperience === selectedExperience;

                (card as HTMLElement).style.display = (categoryMatch && experienceMatch) ? 'block' : 'none';
            });
        }

        if (categoryFilter) {
            categoryFilter.addEventListener('change', filterTools);
        }
        if (experienceFilter) {
            experienceFilter.addEventListener('change', filterTools);
        }
    });
</script>