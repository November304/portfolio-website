---
import { Image } from 'astro:assets';

const tools = [
    { 
        name: "JavaScript", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg", 
        category: "Langages",
        experienceLevel: 2
    },
    { 
        name: "React", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg", 
        category: "Frameworks",
        experienceLevel: 1
    },
    { 
        name: "Node.js", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg", 
        category: "Frameworks",
        experienceLevel: 2
    },
    { 
        name: "Python", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg", 
        category: "Langages",
        experienceLevel: 3
    },
    { 
        name: "Astro", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/astro/astro-original.svg", 
        category: "Frameworks",
        experienceLevel: 2
    },
    { 
        name: "Visual Studio Code", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vscode/vscode-original.svg", 
        category: "Logiciels",
        experienceLevel: 4
    },
    { 
        name: "Git", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg", 
        category: "Logiciels",
        experienceLevel: 4
    },
    { 
        name: "Docker", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg", 
        category: "Logiciels",
        experienceLevel: 2
    },
    { 
        name: "TypeScript", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg", 
        category: "Langages",
        experienceLevel: 2
    },
    { 
        name: "C#", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/csharp/csharp-original.svg", 
        category: "Langages",
        experienceLevel: 4
    },
    { 
        name: ".NET", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/dotnetcore/dotnetcore-original.svg", 
        category: "Frameworks",
        experienceLevel: 4
    },
    { 
        name: "Java", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg", 
        category: "Langages",
        experienceLevel: 3
    },
    { 
        name: "SQL", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg", 
        category: "Langages",
        experienceLevel: 4
    },
    { 
        name: "Angular", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/angularjs/angularjs-original.svg", 
        category: "Frameworks",
        experienceLevel: 2
    },
    { 
        name: "HTML", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg", 
        category: "Langages",
        experienceLevel: 3
    },
    { 
        name: "CSS", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg", 
        category: "Langages",
        experienceLevel: 2
    },
    { 
        name: "PHP", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/php/php-original.svg", 
        category: "Langages",
        experienceLevel: 2
    },
    { 
        name: "Symfony", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/symfony/symfony-original.svg", 
        category: "Frameworks",
        experienceLevel: 3
    },
    { 
        name: "Django", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/django/django-original.svg", 
        category: "Frameworks",
        experienceLevel: 2
    },
    { 
        name: "Unity", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/unity/unity-original.svg", 
        category: "Frameworks",
        experienceLevel: 4
    },
    { 
        name: "Visual Studio", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/visualstudio/visualstudio-plain.svg", 
        category: "Logiciels",
        experienceLevel: 4
    },
    { 
        name: "Eclipse", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/eclipse/eclipse-original.svg", 
        category: "Logiciels",
        experienceLevel: 1
    },
    { 
        name: "Godot", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/godot/godot-original.svg", 
        category: "Frameworks",
        experienceLevel: 1
    },
    { 
        name: "Spring", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/spring/spring-original.svg", 
        category: "Frameworks",
        experienceLevel: 1
    },
    { 
        name: "Quasar", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/quasar/quasar-original.svg", 
        category: "Frameworks",
        experienceLevel: 1
    },
    { 
        name: "SonarQube", 
        icon: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/sonarqube/sonarqube-original.svg", 
        category: "Logiciels",
        experienceLevel: 1
    }
];
---
<section id="tools" class="bg-gray-100 py-20">
    <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold text-center mb-12">Mes Outils</h2>
        
        <div class="flex justify-center mb-8 space-x-4">
            <select id="category-filter" class="px-4 py-2 border rounded">
                <option value="">Toutes Catégories</option>
                <option value="Langages">Langages</option>
                <option value="Frameworks">Frameworks</option>
                <option value="Logiciels">Logiciels</option>
            </select>
            
            <select id="experience-filter" class="px-4 py-2 border rounded">
                <option value="0">Tous Niveaux</option>
                <option value="1">Bases</option>
                <option value="2">Bonnes notions</option>
                <option value="3">Autonome</option>
                <option value="4">Confirmé</option>
            </select>
        </div>

        <div id="tools-grid" class="grid md:grid-cols-5 gap-6 max-w-4xl mx-auto">
            {tools
            .sort((a, b) => b.experienceLevel - a.experienceLevel)
            .map((tool) => (
                <div 
                class="tool-card bg-white p-6 rounded-lg shadow-md text-center"
                data-category={tool.category}
                data-experience={tool.experienceLevel}
                >
                <Image src={tool.icon} alt={tool.name} width={64} height={64} class="w-16 h-16 mx-auto mb-4" />
                <h3 class="text-xl font-semibold">{tool.name}</h3>
                <div class="flex justify-center mt-2">
                    {[...Array(4)].map((_, index) => (
                    <span class={`text-2xl ${index < tool.experienceLevel ? 'text-yellow-500' : 'text-gray-300'}`}>
                        ★
                    </span>
                    ))}
                </div>
                <p class="text-sm text-gray-500 mt-2">{tool.category}</p>
                </div>
            ))}
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const categoryFilter = document.getElementById('category-filter');
        const experienceFilter = document.getElementById('experience-filter');
        const toolCards = document.querySelectorAll('.tool-card');

        function filterTools() {
            const selectedCategory = categoryFilter ? (categoryFilter as HTMLSelectElement).value : '';
            const selectedExperience = parseInt((experienceFilter as HTMLSelectElement).value);

            toolCards.forEach(card => {
                const cardCategory = card.getAttribute('data-category');
                const cardExperience = parseInt(card.getAttribute('data-experience') || '0');

                const categoryMatch = !selectedCategory || cardCategory === selectedCategory;
                const experienceMatch = !selectedExperience || cardExperience >= selectedExperience;

                (card as HTMLElement).style.display = (categoryMatch && experienceMatch) ? 'block' : 'none';
            });
        }

        if (categoryFilter) {
            categoryFilter.addEventListener('change', filterTools);
        }
        if (experienceFilter) {
            experienceFilter.addEventListener('change', filterTools);
        }
    });
</script>